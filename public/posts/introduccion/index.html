<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
    integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="https://victorponz.github.io/symfony-teoria/css/styles.css" />
  <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.0.13/css/all.css' integrity='sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp' crossorigin='anonymous'>
  <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" />
  <link rel="stylesheet" href="https://victorponz.github.io/symfony-teoria/css/style.css" />
  <link rel="stylesheet" href="https://victorponz.github.io/symfony-teoria//css/utilities.css" />
  <link rel="stylesheet" href="https://victorponz.github.io/symfony-teoria//css/post.css" />
  
  
  <title>Programación en JAVA | Introducción</title>
  <script>
      document.documentElement.setAttribute("data-theme", localStorage.getItem("theme") ?  localStorage.getItem("theme") : "");
    </script>
</head>
<body><header id="hero">
    
    <nav class="navbar">
      <div class="container">
        
        <h1 id="logo">
        </h1>
        
        <ul class="nav-menu">
          <li><a class="nav-link  btn btn-primary" href="/">HOME</a></li>
          <li>
            <a
              class="nav-link btn btn-primary"
              href="https://github.com/victorponz/symfony-teoria"
              >GitHub <i class="fas fa-arrow-right"></i
            ></a>
          </li>
          
          <div class="theme-switch">
            <input type="checkbox" id="switch" />
            <label class="toggle-icons" for="switch">
              <img class="moon" src="https://victorponz.github.io/symfony-teoria//img/moon.svg" />
              <img class="sun" src="https://victorponz.github.io/symfony-teoria//img/sun.svg" />
            </label>
          </div>
          
        </ul>
        <div class="hamburger">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </div>
    </nav>
  </header>
<div id="content">
          <div id="write-wrapper">
            <section id="projects" class="project-container container">
              <div id="subject-container" style="width: 100%; padding-top:80px; min-height:800px">
                 <div class="subject-details">
                  <div id="write">
                    <div style="height: 80px; border-left: 5px solid var(--text-color)"></div>
                    <h1 class="indice">Introducción</h1>
                  <div id='content'><p><a href="http://symfony.com/">Symfony</a> es un framework PHP para desarrollo de aplicaciones web así como un conjunto de componentes PHP para usar en tus proyectos.</p>
<p>Hasta ahora, hemos desarrollado todo nuestro código partiendo sólo de las herramientas que provee la librería PHP estándar: sesiones, headers, http request y response, bases de datos, redirecciones, urls limpias, etc. Hemos  creado, además, nuestro propio patrón MVC para separar la lógica de negocio, de la vista (presentación) y del controlador y finalmente hemos usado el microframework <strong>Slim</strong>.</p>
<p><code>Symfony</code>, y cualquier otro framework <code>PHP</code>,  nos ayuda a trabajar con todas estas cuestiones de una manera más sencilla y profesional, permitiendo definir nuestra aplicación a través de controladores.</p>
<p>Para comprobar esta diferencias, visitad la página <a href="https://symfony.com/doc/current/introduction/from_flat_php_to_symfony.htmll">Symfony versus flat PHP</a></p>
<h2 id="instalar-symfony">Instalar Symfony</h2>
<p>Es tan sencillo como ejecutar el siguiente comando</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ composer create-project symfony/skeleton my_project
</code></pre></div><p><img src="/symfony-teoria/assets/img/c2.png" alt=""></p>
<p>Este comando crea un nuevo proyecto <code>symfony</code> en la carpeta <code>my_project</code></p>
<p>Para poder servirlo como una aplicación web, usamos el propio servidor web incorporado en PHP.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd my_project
$ php -S 127.0.0.1:8000 -t public
</code></pre></div><p>Este último comando hace que el Document Root del servidor incorporado en <code>PHP</code> sea el directorio <code>public</code>, que es donde reside <code>index.php</code> y aquí empieza todo!</p>
<blockquote>
<p>El directorio <code>public</code> es el hogar de todos los archivos públicos y estáticos de la aplicación, incluidas imágenes, hojas de estilo y archivos JavaScript. También es donde vive el controlador frontal (<code>index.php</code>).</p>
</blockquote>
<p><a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a></p>
<p><img src="/symfony-teoria/assets/img/image-20220930121933001.png" alt="image-20220930121933001"></p>
<p>Si abres el proyecto con <strong>Visual Studio Code</strong>, verás la siguiente estructura</p>
<p><img src="/symfony-teoria/assets/img/visual-studio.png" alt=""></p>
<blockquote>
<p><strong>GIT</strong></p>
<p>Podéis crearos un repositorio en git para esta práctica</p>
</blockquote>
<h2 id="primeros-pasos">Primeros pasos</h2>
<p>Antes que nada, vamos a analizar el archivo <code>index.php</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">App\Kernel</span>;

<span style="color:#66d9ef">require_once</span> <span style="color:#a6e22e">dirname</span>(<span style="color:#66d9ef">__DIR__</span>)<span style="color:#f92672">.</span><span style="color:#e6db74">&#39;/vendor/autoload_runtime.php&#39;</span>;

<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (<span style="color:#66d9ef">array</span> $context) {
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Kernel</span>($context[<span style="color:#e6db74">&#39;APP_ENV&#39;</span>], (<span style="color:#a6e22e">bool</span>) $context[<span style="color:#e6db74">&#39;APP_DEBUG&#39;</span>]);
};

</code></pre></div><p>Es un poco extraño, ¿no?. Pero no nos hemos de preocupar porque este archivo no vamos a modificarlo nunca.</p>
<h3 id="vamos-a-ver-algunos-ejemplos-básicos">Vamos a ver algunos ejemplos básicos.</h3>
<p>La página por defecto <code>home</code> (/) de <code>Symfony</code> es &ldquo;<em>Welcome to Symfony</em>&quot;, porque todavía no hemos configurado ninguna ruta para que nos devuelva otro contenido. El proceso de crear una nueva ruta, consta de dos partes: definir la ruta y escribir el controlador asociado a la misma:</p>
<p>En Slim, las rutas se definían en el controlador frontal:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$app-&gt;get(&#39;/&#39;, PageController::class . &#39;:home&#39;)-&gt;setName(&#34;home&#34;);
</code></pre></div><p>Y en Symfony se definen en el archivo <code>config/routes.yaml</code></p>
<p>Añadid el sigiente código:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">index</span>: 
    <span style="color:#66d9ef">path</span>: /
    <span style="color:#66d9ef">defaults</span>: { <span style="color:#66d9ef">_controller</span>: <span style="color:#e6db74">&#39;App\Controller\DefaultController::index&#39;</span> }
</code></pre></div><p>Esto define  una <code>ruta</code> llamada <code>index</code> para el <code>path</code> <strong>/</strong> y el controlador que va a tratar la petición en ese path, en este caso el método <code>index</code> de la clase <code>DefaultController</code></p>
<p>Ahora cread un archivo <code>DefaultController.php</code> en <code>src/Controller/</code></p>
<p><code>&gt;&gt; DefaultController.php</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">App\Controller</span>;

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Symfony\Component\HttpFoundation\Response</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DefaultController</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">index</span>()
    {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Response</span>(<span style="color:#e6db74">&#39;Hello!&#39;</span>);
    }
}
</code></pre></div><p>Si todo va bien, ya tenéis creada la página de inicio de vuestra web.</p>
<p><img src="/symfony-teoria/assets/img/c5.png" alt=""></p>
<p>Vamos a crear una segunda página que muestre un número aleatorio en la ruta <code>/lucky/number</code>. Primero definimos la nueva ruta en <code>config/routes.yaml</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">lucky_number</span>:
    <span style="color:#66d9ef">path</span>: /lucky/number
    <span style="color:#66d9ef">controller</span>: App\Controller\LuckyController::numberAction
</code></pre></div><p>Y creamos el script php en <code>src/Controller/</code> con el nombre <code>LuckyController.php</code></p>
<p><code>&gt;&gt; LuckyController.php</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">App\Controller</span>;

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Symfony\Component\HttpFoundation\Response</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LuckyController</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">numberAction</span>()
    {
        $number <span style="color:#f92672">=</span> <span style="color:#a6e22e">mt_rand</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>);

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Response</span>(
            <span style="color:#e6db74">&#39;&lt;html&gt;&lt;body&gt;Lucky number: &#39;</span><span style="color:#f92672">.</span>$number<span style="color:#f92672">.</span><span style="color:#e6db74">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
        );
    }
}
</code></pre></div><p>Si todo va bien, mostrará la siguiente página al visitar la url <a href="http://localhost:8000/lucky/number">http://localhost:8000/lucky/number</a></p>
<p><img src="/symfony-teoria/assets/img/c6.png" alt=""></p>
<p>Ahora vamos a crear dos rutas: una para mostrar un resumen de todas las entradas de blog y otra para mostrar una entrada de blog concreta.</p>
<p><code>&gt;&gt; routes.yaml</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">blog_list</span>:
    <span style="color:#66d9ef">path</span>:     /blog
    <span style="color:#66d9ef">controller</span>: App\Controller\BlogController::list

<span style="color:#66d9ef">blog_show</span>:
    <span style="color:#66d9ef">path</span>:     /blog/{entryId}
    <span style="color:#66d9ef">controller</span>: App\Controller\BlogController::show
</code></pre></div><p>Según estas definiciones de ruta, hemos de crear la clase <code>BlogController</code> con los métodos <code>list</code> y <code>show</code>. La ruta <code>blog_show</code> tiene un parámetro llamado <code>entryid</code>. Este parámetro será pasado por el kernel al método <code>show</code>.</p>
<p><code>&gt;&gt; BlogController.php</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">App\Controller</span>;

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Symfony\Component\HttpFoundation\Response</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BlogController</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">list</span>()
    {
      $content <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&lt;ul&gt;&#34;</span>;
      <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">10</span>; $i<span style="color:#f92672">++</span>){
        $content <span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;&lt;li&gt;Entrada </span><span style="color:#e6db74">$i</span><span style="color:#e6db74"> &lt;/li&gt;&#34;</span>;
      }
      $content <span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;&lt;/ul&gt;&#34;</span>;
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Response</span>(
            <span style="color:#e6db74">&#34;&lt;html&gt;&lt;body&gt;</span><span style="color:#e6db74">$content</span><span style="color:#e6db74">&lt;/body&gt;&lt;/html&gt;&#34;</span>
        );
    }
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>($entryId)
    {

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Response</span>(
            <span style="color:#e6db74">&#39;&lt;html&gt;&lt;body&gt;Entrada &#39;</span> <span style="color:#f92672">.</span> $entryId <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
        );
    }
}
</code></pre></div><p>Si visitamos la página <a href="http://127.0.0.1:8000/blog">http://127.0.0.1:8000/blog</a>, aparecerá una lista con todas las entradas de blog</p>
<p><img src="/symfony-teoria/assets/img/image-20211229123913358.png" alt="lista de entradas"></p>
<p>Si vistamos la página <a href="http://127.0.0.1:8000/blog/5">http://127.0.0.1:8000/blog/5</a>, por ejemplo, aparecerá la entrada de blog con id <code>5</code></p>
<p><img src="/symfony-teoria/assets/img/image-20211229124115628.png" alt="Entrada de blog"></p>
<h2 id="separar-la-presentación-de-la-lógica">Separar la presentación de la lógica</h2>
<p>Vamos a usar el motor de plantillas <code>twig</code> usado por <code>Symfony</code>. Primero hemos de instalarlo con <code>composer</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">composer require symfony/twig-bundle
</code></pre></div><p>Ahora creamos dos nuevas rutas:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">blog_list_twig</span>:
    <span style="color:#66d9ef">path</span>:     /blogtwig
    <span style="color:#66d9ef">controller</span>: App\Controller\BlogTwigController::list

<span style="color:#66d9ef">blog_show_twig</span>:
    <span style="color:#66d9ef">path</span>:     /blogtwig/{entryId}
    <span style="color:#66d9ef">controller</span>: App\Controller\BlogTwigController::show
</code></pre></div><p>Creamos las plantillas <code>twig</code>
<code>&gt;&gt; templates/blog/entry.html.twig</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">html</span>&gt;&lt;<span style="color:#f92672">body</span>&gt;Entrada: {{entryId}}&lt;/<span style="color:#f92672">body</span>&gt;&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p><code>&gt;&gt; templates/blog/list.html.twig</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">html</span>&gt;&lt;<span style="color:#f92672">body</span>&gt;
&lt;<span style="color:#f92672">ul</span>&gt;
  {% for i in range(1, 10) %}
      &lt;<span style="color:#f92672">li</span>&gt;Entrada {{ i }}&lt;/<span style="color:#f92672">li</span>&gt;
  {% endfor %}
&lt;/<span style="color:#f92672">ul</span>&gt;
&lt;/<span style="color:#f92672">body</span>&gt;&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>Y <strong>creamos un nuevo controlador</strong> para que use estas plantillas:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">App\Controller</span>;

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BlogTwigController</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">AbstractController</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">list</span>()
    {
      <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">render</span>(<span style="color:#e6db74">&#39;blog/list.html.twig&#39;</span>);
    }
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>($entryId)
    {
      <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">render</span>(<span style="color:#e6db74">&#39;blog/entry.html.twig&#39;</span>, <span style="color:#66d9ef">array</span>(<span style="color:#e6db74">&#39;entryId&#39;</span> <span style="color:#f92672">=&gt;</span> $entryId));
    }

}
</code></pre></div><p><strong>Más información en</strong></p>
<p><a href="https://symfony.com/at-a-glance">https://symfony.com/at-a-glance</a><br>
<a href="https://symfony.com/doc/current/quick_tour/the_big_picture.html">https://symfony.com/doc/current/quick_tour/the_big_picture.html</a><br>
<a href="https://symfony.com/doc/current/page_creation.html">https://symfony.com/doc/current/page_creation.html</a><br>
<a href="https://symfony.com/doc/current/controller.html">https://symfony.com/doc/current/controller.html</a></p>

                  </div>
                 </div>
                </div>
              </div>
            </section><footer id="footer">
    <div class="container">
      
      <div class="attribution">
        <a rel="license" href="http://creativecoms.org/licenses/by-sa/4.0/">
          <img alt="Licencia de Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
        </a>
        <br />Todo el material de esta web está bajo una <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">licencia de Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional</a>.

      </div>
      <div class="attribution">
        <a
          href="https://github.com/CommunityPro/portfolio-html"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img
            src="https://user-images.githubusercontent.com/62628408/157202263-9174da24-b19a-4017-9b7c-a1d26ae8f014.svg"
            alt="attribution"
            width="150px"
          />
        </a>
      </div>
    </div>
  </footer>
  <script src="https://victorponz.github.io/symfony-teoria/js/script.js"></script></body>
</html>
